<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta charset="UTF-8">
  <title>Shortsounds</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
  <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
</head>
<body>
  <section class="page-header">
    <h1 class="project-name">ShortSounds</h1>
    <h2 class="project-tagline"></h2>
    <a href="http://nharlow89.github.io/ShortSounds/user.html" class="btn">User Docs</a>
    <a href="http://nharlow89.github.io/ShortSounds/developer.html" class="btn">Developer Docs</a>
    <div class="team">
      <ul>
        <li><a href="https://github.com/nharlow89">Neil Harlow</a></li>
        <li><a href="https://github.com/jbuscher">John Buscher</a></li>
        <li><a href="https://github.com/shampson">Seth Hampson</a></li>
        <li><a href="https://github.com/Sigotron">Joel Sigo</a></li>
        <li><a href="https://github.com/caseyfischer">Casey Fischer</a></li>
        <li><a href="https://github.com/mattiecarlson">Mattie Carlson</a></li>
        <li><a href="https://github.com/jonesman107">Nick Jones</a></li>
        <li><a href="https://github.com/yoonj4">Justin Yoon</a></li>
      </ul>
    </div>
  </section>

  <h2 style="text-align:center;">Developer Documentation</h2>

  <section class="main-content">
    <h3>
      <a class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>
      Source Code
    </h3>
    <p class="source-code">
      <a href="https://github.com/nharlow89/ShortSounds" class="btn">GitHub Repository</a>
      <a href="https://github.com/nharlow89/ShortSounds/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/nharlow89/ShortSounds/tarball/master" class="btn">Download .tar.gz</a>
      <br>
      <a href="https://github.com/nharlow89/ShortSounds/releases" class="btn">Releases</a>
    </p>

    <h3>
      <a class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>
      Directory Structure
    </h3>
    <p>
      Directory Structure (of the master branch)<br>
      
      <b>app/src/</b>: Contains all the source code for the app.<br>
      <div style="padding-left: 20px;">
        <b>main/</b>: Contains all the source code for the main app.<br>
        <div style="padding-left: 20px;">
          <b>java/com/sloths/speedy/shortsounds</b>: Contains all the Java source code for the main app.<br>
          <b>res/</b>: Contains various resources necessary for the main app (image files, XML files of the layout etc.<br>
        </div>
        <b>java/com/sloths/speedy/shortsounds/test</b>: Contains all the Java source code for the tests.<br>
      </div>
      <b>README.md</b>: Contains a link to the development webpage and documentation for both users and developers.
    </p>

    <h3>
      <a class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>
      Build Instructions
    </h3>
    <p>
      These instructions assume you’re using Android Studio which can be downloaded here: <a href="https://developer.android.com/sdk/index.html">https://developer.android.com/sdk/index.html</a>.
      After you’ve opened up the project, click on the Build tab and click Generate Signed APK…. Follow along with the Generate Signed APK Wizard that appears and an APK file will be generated in the destination folder you selected.
    </p>

    <h3>
      <a class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>
      Run Instructions
    </h3>
    <p>
      In Android Studio, click the Run ‘app’ button or hit Shift+F10. This also builds the app so there is no need to build it beforehand. To run in an emulator, make sure Launch emulator is selected, select a virtual device to run it on, and click OK.
    </p>
    <p>
      To run on an actual Android device:
      <ol>
        <li>Follow the Build Instructions to generate the .apk file</li>
        <li>Connect your android device to your computer via USB</li>
        <li>Move the application (.apk file) onto your Android. <a href="http://developer.servalproject.org/dokuwiki/doku.php?id=content:android:tips:install_apk">Instructions if needed</a>.</li>
        <li>Once the application is on your device, locate it using a file manager and click on it to install.</li>
        <li>Once installed, locate the app and run it!</li>
      </ol>
    </p>

    <h3>
      <a class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>
      Testing
    </h3>
    <p>
      All unit tests will be designed and implemented by the developers as they develop. It’s been recommended for everyone to use test driven development, so that the tests our written before the implementations. However, if they choose not to use test driven development, it’s expected that unit tests will be written closely after the code is.
    </p><p>
      System tests will be written after major feature modules are implemented, to insure that they interact as expected. The teams which created the modules will be responsible for writing the system tests.
    </p><p>
      We have decided against implementing a full automated testing suite due to the circumstances of the project. Running the tests from a server automatically has proven difficult with android tools. Instead, developers can follow the instructions in the Running the Test Suite section to run the test suite provided before making changes to master.
    </p><p>
      To add a new test, it needs to be added to the correct directory, found in shortsounds/app/src/androidTest/java/package. All tests run by the test suite are found in this directory.
    </p><p>
      Unit tests will require packages that do not come standard with Android Studio. If you are getting dependency errors, follow these instructions:
      <ol>
        <li>Start the Android SDK Manager.</li>
        <li>In the SDK Manager window, scroll to the end of the Packages list, find the Extras folder and, if necessary, expand to show its contents.</li>
        <li>Select the Android Support Repository item.</li>
        <li>Click the Install packages... button</li>
      </ol>
      To run a test in Android Studio, hit Alt+Shift+F10 and choose the option that matches the name of the test. Make sure to choose the one with the android icon since that means it’s being run as an AndroidTest rather than a JUnit test. Running the test re quires opening up an emulator which may be an issue if you’re using something other than Android Studio.
    </p>

    <h3>
      <a class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>
      Running the Test Suite
    </h3>
    <p>
      Before running any test, be sure to sync your gradle with the project, this can be done through cleaning and building the project. To run all of test suites, first start an emulator, or plug in a debug enabled android device into your computer. Then, open the ShortSounds directory in terminal or in cmd. Mac/Linux users should type and run the command <b>./test_suite.sh</b>. Windows users should type the command <b>test_suite.bat</b>. The first time this is done, the files necessary for the test suite will be automatically downloaded and extracted. Afterwards the test suite should run, and a browser window should open up with the results of all the test results. Below is a screenshot of a sample webpage that should open after a test suite is ran.
    </p>
    <p>
      <img src="https://raw.githubusercontent.com/nharlow89/ShortSounds/gh-pages/deliverables/sample_test_summary.png" width="100%"><br>
    </p>

    <h3>
      <a class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>
      Code Test Coverage
    </h3>
    <p>
      We used Intellij IDEA for the test coverage metric. This tool is run via AndroidStudio. In order to get the test coverage tool to run properly we had to meet the following conditions:
      <ul>
        <li>Java version < 1.7.0_45</li>
        <li>AndroidStudio >= 1.2</li>
      </ul>
      Once these conditions are met, choose the ApplicationTests configuration within android studio and click the ‘Run ApplicationTests with Coverage’.
      <br>
      We will note that due to particularities of how our IDE (Android Studio), building and testing frameworks interoperated, code coverage was difficult to make feasible.  We attempted to use Cobertura, EMMA, JaCoCo and the native Intellij tool built into Android Studio and after spending ~30 worker-hours on the issue and subsequently speaking with client representatives, we decided it was not expedient to continue, given the time constraints.
    </p>


    <h3>
      <a class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>
      Automated Build and Test
    </h3>
    <p>
      To set up an automated build, a Short Sounds team member need only log into the dedicated Jenkin’s web server, located at DNS: <b>http://ec2-52-11-0-15.us-west-2.compute.amazonaws.com:8080/</b>.
    </p><p>
      * Cse 403 staff can login and view the Jenkin’s dashboard and the Short Sounds job with: 
      <br><span style="padding-left: 20px;">username: cse_403_staff</span>
      <br><span style="padding-left: 20px;">password: emina</span>
    </p><p>
      If a Short Sounds team member has not previously created an account with Jenkins and logged in, they need to create an account and send their newly created username to Joel at the email:
      <b>sigoj@cs.washington.edu</b>. Joel will respond when they have been given the credentials to access the count.
      Upon successfully logging in, creating a new automated build is as simple as click the Short Sounds job and hitting Build Now, located on the left.
    </p><p>
      In order to set up the daily build, I first launched an EC2 instance on Amazon AWS that runs an Ubuntu server. I installed Jenkins on the Ubuntu server. In order to get Jenkins to pull the Short Sounds master branch repository I installed the Git and GitHub plugins on Jenkins and then configured it with the repository information. I installed the Android Emulator Plugin. This enables Jenkins to launch a pre-defined emulator before it performs its build steps. I also installed the Gradle Build plugin so that we can perform Gradle builds, which is what Short Sounds utilizes. After installing the required plugins, I set up Jenkins to run 1 build and test a day automatically, as well as when changes are pushed to master. I created build steps that include:
    <ol>
      <li>update the Android SDK to use Build Tools 21.1.2.</li>
      <li>Invoke a Gradle script that performs a full build of the Short Sounds application.</li>
      <li>Perform a shell command that runs all of the tests that utilize AndroidJUnitRunner. I configured Jenkins to send out emails to all Short Sounds team members when a build or test fails. This was done by creating a Gmail account especially for the purpose. I then added that email account as the SMTP host on Jenkins. Having it send out the emails for failed builds was as simple as adding a post-build step for emailing users on failed builds and inputting Short Sounds teammates emails into the box.</li>
    </ol>
      <b>* We no longer have Jenkins as an automated tester. At this point it has proven unreliable for unit testing. It commonly doesn’t detect certain types of unit tests. See Testing section above for information about testing.</b>
    </p>
    
    <h3>
      <a class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>
      Release
    </h3>
    <p>
      <ol>
        <li>Push the commit and tag the commit as a new version/release.</li>
        <li>Create a .zip and a .tar.gz of the source code and replace the ones on the development site.</li>
        <li>Build a new executable using the build instructions above and replace the .apk file in the Google drive.</li>
        <li>Test all download links to make sure they refer to the new version.</li>
      </ol>
    </p>
    
    <h3>
      <a class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>
      Bugs
    </h3>
    <p>
      A list of bugs (both current and resolved) can be found in the repository page linked to above by clicking on the Issues tab on the side. To resolve a bug, you can either do it via <a href="https://help.github.com/articles/closing-issues-via-commit-messages/">commit messages</a> or through <a href="https://github.com/blog/1506-closing-issues-via-pull-requests">pull requests</a>.
    </p>

    <h3>
      <a class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>
      Design Patterns and Principles
    </h3>
    <p>
      <b>Singleton:</b>  The <a href="https://github.com/nharlow89/ShortSounds/blob/master/app/src/main/java/com/sloths/speedy/shortsounds/model/ShortSoundSQLHelper.java">ShortSoundSQLHelper</a> is an example of a Singleton that we are using this application.  The reason we chose to have this class be a singleton is because we only want the application to have a single database and a single class to access that database.  Multiple databases are not, and should not be allowed in the storage of the ShortSounds.
    </p>
    <p>
      <b>Model-View-Controller:</b>  The Model-View-Controller design pattern is implemented in ShortSounds in order to separate the model as much as possible from the view and keep the application modular.  Since this is an Android application, the view and the controller are largely kept in the same files, but the model is kept entirely separate.  As seen in <a href="https://github.com/nharlow89/ShortSounds/tree/master/app/src/main/java/com/sloths/speedy/shortsounds">here</a>, there is a folder with all of the files for the model including the model for a ShortSound, the model for a ShortSound track, and the model for various recorders, players and effect implementations.  In the view folder, all of the files have to do with how the user interacts with the user interface, including the MainActivity and various other view files like a dialog box.  Many of these files also contain elements of a controller, as these are hard to separate in Android development.  Finally, there are two controller files outside of the model and view folders.  These files connect the view to the backend model.
    </p>

    <footer class="site-footer">
      <span class="site-footer-owner"><a href="https://github.com/nharlow89/ShortSounds">Shortsounds</a> is maintained by <a href="https://github.com/nharlow89">nharlow89</a>.</span>

      <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
    </footer>

  </section>

</body>
</html>

